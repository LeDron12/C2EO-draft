# Набор скриптов для запуска тестов

*Прочитать на другом языке: [English](readme.md)*

Убедитесь, что вы полностью выполнили главный [гайд](https://github.com/polystat/c2eo#2-build-llvm--clang)

## Иерархия каталогов

Тесты размещаются в каталоге `tests`. Каждый тест - файл на C, лежит в отдельном подкаталоге. Имя файла программы совпадает с именем каталога и имеет расширение `.c`. В ходе тестирования в этих каталогах тестов создаются дополнительные данные с тестовой информацией.

В каталоге `configuration` хранятся файлы, используемые для выборочного тестирования. Каждый файл содержит список подкаталогов с тестами, размещенных в каталоге `test`. Одно имя подкаталога в одной строке.

## Запускаемые скрипты

### Запуск только одного теста

`python3 testOne.py <subdirectory name>`

Выполняется только один тест, размещенный в указанном подкаталоге.

### Запуск всех тестов

`python3 testAll.py`

Запускаются все тесты, размещенные в подкаталогах каталога `test`. Для обхода всех тестов запускает в цикле `testOne.py`.

### Выборочный запуск тестов

`python3 testSelected.py <file-of-configuration>`

Запускаются тесты, размещенные в указанном конфигурационном файле в каталоге `configuration`. Количество конфигурационных и число тестов в них файлов может быть произвольным. Для обхода заданных в конфигурации тестов запускает в цикле `testOne.py`.

### Очистка каталогов для всех тестов

`python3 cleanAll.py`

Вспомогательная утилита, которая запускается для очистки тестовых каталогов. Остается только файл с тестовым кодом на языке C. Может использоваться при синхронизации данных, когда мусор нужно быстро подобрать. При запуске тестов каждый каталог предварительно очищается без использования данной утилиты.

## Вспомогательные скрипты

### Формирование промежуточного тестового файла

`splitter.py <input-file-path output-file-path>`

Предназначен для установки комментария на строки тестового C-файла, начинающиеся с символа `#` и функции `printf`, что позволяет убрать библиотеки ввода вывода из тестового скрипта, используемые при компиляции и запуска эталонного C-кода. В результате из файла `*.c` формируется файл `*-eo.c`, используемый транспилятором. Данный скрипт запускается внутри `testOne.py`.

